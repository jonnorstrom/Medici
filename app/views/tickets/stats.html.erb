<table>
  <tr>
    <th>
      Total Users
    </th>
  </tr>

  <tr>
    <td>
      <%= User.all.count %>
    </td>
  </tr>
</table>



<% @events_with_tickets.each do |event| %>
  <h2><%= event.name %></h2>
  <table>
    <tr>
      <th>
        Name
      </th>
      <th>
        Email
      </th>
      <th>
        Quantity
      </th>
      <th>
        Update
      </th>
    </tr>

    <% event.paid_tickets.each do |ticket| %>
      <tr>
        <td>
          <%= ticket.user.name %>
        </td>
        <td>
          <%= ticket.user.email %>
        </td>
        <td>
          <%= ticket.quantity %>
        </td>
        <td>
          <%= form_for(ticket, :html => { :method => :delete }) do |f| %>
            <%= f.submit "Remove Ticket", data: {confirm: 'Are you sure?'} %>
          <% end %>
        </td>
      </tr>
    <% end %>
    <p>Total: <%= event.tickets.inject(0) {|sum,t| sum + t.quantity } %></p>
  </table>
<% end %>

<h3>All Users</h3>
<table>
  <tr>
    <th>
      Name
    </th>
    <th>
      User Emails
    </th>
    <th>
      Sign-up Date
    </th>
  </tr>
  <% @users.each do |user| %>
<tr>
  <td>
    <%= user.name %>
  </td>
  <td>
    <%= user.email %>
  </td>
  <td>
    <%= user.created_at.strftime("%m/%d") %>
  </td>
</tr>
<% end %>
</table>
